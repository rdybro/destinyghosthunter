<?php

	// http://www.primagames.com/games/destiny/tips/destiny-how-find-all-20-gold-chests
	// http://www.ign.com/wikis/destiny/Gold_Loot_Chests
	
	$goldenChests = array(
		"Earth" => array(
			1 => array(ID => "earth-1", Location => "The Steppes (by Dock 13)", Mission => "Patrol, Restoration", Video => "X--5KxEJeSo", Images => "3", Description => "You probably already got this chest. The chest is not very well hidden, and is right in the path of the second story mission your character will ever encounter, Restoration. From the spawn of Earth Patrol, head slighly right, and enter the big building leading into Dock 13. Follow the path in the building and find the chest on a table to your left in one of the small rooms."),
			2 => array(ID => "earth-2", Location => "The Lunar Complex", Mission => "Patrol, The Dark Within", Video => "Hg8jJGM235M", Images => "3", Description => "From Patrol spawn head left and pass through Mothyards (the plane graveyard), and head into The Lunar Complex. Follow the path inside the building and go through the dark room. The room after this has a little room inside, where som enemies are staying. Jump on top of this room, and you will find this chest."),
			3 => array(ID => "earth-3", Location => "Mothyards (by Forgotten Shore)", Mission => "Patrol", Video => "dplzjm_x3Pc", Images => "3", Description => "From Patrol spawn head left and pass through Mothyards, and go towards the Forgotten Shore. On the path to the Forgotten Shore you can find a chest in a little well hidden cave in the rocks to your left."),
			4 => array(ID => "earth-4", Location => "Forgotten Shore", Mission => "Patrol", Video => "02FmFPZHQd8", Images => "3", Description => "Head out of the cave and continue your way to the Forgotten Shore. Go all the way down to the shore and walk on the rocks along the cement wall to the left. This chest is at the end of the path."),
			5 => array(ID => "earth-5", Location => "The Devil's Lair", Mission => "The Devil's Lair (Strike)", Video => "1RSbWTNYA9w", Images => "3", Description => "Start up \"The Devil's Lair\" and run through the strike until you reach the area called \"The Devil's Lair\" where the boss fight against Sepiks Prime will take place. After you kill Sepiks Prime, jump down on the earth under where Sepiks Prime hang, and go under the platform to the right to find the last golden chest in Old Russia."),
		), "Moon" => array(
			1 => array(ID => "moon-1", Location => "Temple of Crota", Mission => "Patrol", Video => "TL0X6jbyQZE", Images => "3", Description => "From Moon Patrol spawn point drive up the hill and turn right. Go through Anchor of Light and into Temple of Crota to right after passing by the big mushroom building. Go down the Temple of Crota and find the chest on a ledge under the spaceship-like thing."),
			2 => array(ID => "moon-2", Location => "Archer's Line (by Hellmouth)", Mission => "Patrol", Video => "PaWzOB67KLk", Images => "2", Description => "From Moon Patrol spawn point drive up the hill and take the road to the left. Find the golden chest hidden behind some rocks next to the flying jump rocks."),
			3 => array(ID => "moon-3", Location => "Archer's Line (by Hall of Wisdom)", Mission => "Patrol", Video => "bKdDQjpC9qk", Images => "3", Description => "This chest is pretty easy available from Patrol spawn, but if you miss the next ghost, I would really advise you to load up the mission The World's Grave, as you will literally walk right past this. Drive up the hill from spawn and go through the building with the dome roof, and through the entrance to Hall of Wisdom. Go down the stairs, and find the chest in a little cave to the right."),
			4 => array(ID => "moon-4", Location => "The World's Grave", Mission => "The World's Grave", Video => "JL0lNW1uxw4", Images => "3", Description => "Load up the mission The World's Grave on the Moon, and follow the story until you reach the are The World's Grave, and see the door from the first picture. This door is only open during this mission. Head through the door, and go left immediately after entering the room. Jump down on the ground, and find the chest on the rock next to you."),
			5 => array(ID => "moon-5", Location => "The Summoning Pits", Mission => "The Summoning Pits (Strike)", Video => "fQoZSwaCvhk", Images => "3", Description => "Start the Moon strike \"The Summoning Pits\" and go through until you reach The Summoning Pits and Phogoth. In the end of the big room with Phogoth there is a couple of stairs leading down to a lowered platform where you will find the last golden chest on the Moon."),
		), "Venus" => array(
			1 => array(ID => "venus-1", Location => "Shattered Coast (by Istar Academy)", Mission => "Patrol", Video => "89_Zkm4kU_8", Images => "3", Description => "From Patrol spawn head right and follow the path. When you reach the big statue you have to turn left and head down the tunnel to Ishtar Academy. This chest will be hiding behind on of the pillars in the tunnel."),
			2 => array(ID => "venus-2", Location => "N/Gen Branch", Mission => "Patrol", Video => "DvVRx5ZAsdM", Images => "4", Description => "Continue your way to the Ishtar Academy, and head right through it. Follow the path until you reach Ishtar Commons, and head right through this too. You should now end up in N/Gen Branch. When entering N/Gen Branch go right and up the stairs to the office-like room, and find the chest in one of the cubicles."),
			3 => array(ID => "venus-3", Location => "Campus 9", Mission => "Patrol", Video => "dqPhtwwMxF8", Images => "5", Description => "From Patrol spawn head right and follow the path through The Shattered Coast and Ishtar Cliffs until your reach the Waking Ruins. Hold right and go through the (unactive) portal into Campus 9. Continue straight forward, and find the chest next to a pillar, behind the large flat building in the back."),
			4 => array(ID => "venus-4", Location => "Winter's Lair", Mission => "Patrol", Video => "PbRgfzw_v_o", Images => "4", Description => "From Patrol spawn head left and go into the Ember Caves. From here enter the big cave from the big platform on the left side of the area. Follow the path in the cave until you reach Winter's Lair. Go through the Winter's Lair until you get up where you can look down at the lower level (where you came from). From here you can see the chest along the rock on the other side of the hole."),
			5 => array(ID => "venus-5", Location => "The Cinders", Mission => "Patrol", Video => "myFeNBpnfoo", Images => "3", Description => "Now continue through the Winter's Lair until you reach The Cinders. Go down to the big space ship hanging in the air, and walk onto it. Go right, down to the back of the ship where the last chest on Venus is."),
		), "Mars" => array(
			1 => array(ID => "mars-1", Location => "The Barrens", Mission => "Patrol", Video => "xlq82bTWFJ4", Images => "3", Description => "From Patrol spawn head right and follow the path until you reach the glimmer farming spot from the Exlusion Zone mission. Head into the round building and find the chest on top of some boxes."),
			2 => array(ID => "mars-2", Location => "The Barrens (by The Hollows)", Mission => "Patrol", Video => "bR76V81K8o8", Images => "3", Description => "Take the path down to a lowered area (still in The Barrens) where some Cabals are fighting the Vex. Go down in the tunnel leading to The Hollows, and almost before the end of the tunnel, jump up through the broken roof and find the chest hiding in the corner."),
			3 => array(ID => "mars-3", Location => "Dust Palace", Mission => "Patrol", Video => "jNKevjovpCM", Images => "3", Description => "Continue out of the tunnel and into The Hollows. Find the big building with the dome roof straight in front of you, and enter the door on the right side of the building. This leads you to Dust Palace, where the next chest is hiding in a little room a little to the left from when you enter the room."),
			4 => array(ID => "mars-4", Location => "Iron Line", Mission => "Patrol", Video => "Uat-z5ICi7I", Images => "3", Description => "These last two chests are pretty secluded relative to the Patrol spawn, so it might be worth it to take them during a mission. But to get this chest for Patrol spawn, head right and follow the path through The Barrens, Scablands, Firebase Rubicon (under the bridge to the right) and Rubicon Wastes. Enter Iron Line through the entrance in the far right corner of Rubicon Wastes. Go up the platform and head a little left, and use the pipes to reach the upper level. Jump over the big gate and find the chest tucked away in the corner."),
			5 => array(ID => "mars-5", Location => "Tharsis Junction", Mission => "Patrol", Video => "onFS_J35ciE", Images => "4", Description => "From Patrol spawn head left and pass through The Barrens and The Hollows into The Buried City. Head into the big building with \"OWT\" written on the facade. Follow the path inside the building through Freehold Station until you reach Tharsis Junction. Go past the trains, and find the room approximately behind the Vex portal. The left wall in this room is a \"fake\" wall, and you can find the chest behind it."),
		)
	);
	
?>

<div class="row">
	<div class="col-md-12">
		<h2>Golden Chests <?php echo $subtitle; ?></h2>
	</div>
</div>

<div class="row">
	<div class="col-md-3">
	
		<?php
		
			$characters = getCharacters($curMembershipId, $curPlatform);
			
			foreach($characters[data][characters] as $character) {
				$curCharacterId = $character[characterBase][characterId];
				$characterProgression = getCharacterProgression($curMembershipId, $curPlatform, $curCharacterId);
		
				$characterClass = getCharacterClass($character[characterBase][classType]);
				$characterRace = getCharacterRace($character[characterBase][raceHash]);
				$characterGender = getCharacterGender($character[characterBase][genderType]);
				
				$characterLevel = $character[characterLevel];
				$characterLight = $character[characterBase][powerLevel];
				
		?>
		
				<div class="list-group">
					<div class="list-group-item active"><?php echo $characterClass . " " . $characterLevel . " (Light " . $characterLight . ")"; ?></div>
					<?php /* <div class="list-group-item active"><?php echo $characterClass . " " . $characterRace . " " . $characterGender . "(" . $characterLevel . " " . $characterLight . ")"; ?></div> */ ?>
		
		<?php
				
				foreach($characterProgression[data][progressions] as $progression) {
					if($progression[progressionHash] == "1774654531" OR $progression[progressionHash] == "1707948164" OR $progression[progressionHash] == "2158037182" OR $progression[progressionHash] == "2193513588") {
						if($progression[progressionHash] == 1774654531) { $planet = "Earth"; }
						elseif ($progression[progressionHash] == 1707948164) { $planet = "Moon"; }
						elseif ($progression[progressionHash] == 2158037182) { $planet = "Venus"; }
						elseif ($progression[progressionHash] == 2193513588) { $planet = "Mars"; }
						
						$ghostLocationArray[$planet][goldenChestsCount] = $progression[currentProgress];
					}
				}
				
				foreach($ghostLocationArray as $location => $array) {
					if($array[goldenChests] == 1) {
						
		?>
		
						<a href="<?php echo "/" .  $curPlatform. "/" . $curDisplayNameUrl . "/chests/" . strtolower($location) . "/"; ?>" class="list-group-item"><?php echo $location; ?><span class="badge pull-right"><?php echo $array[goldenChestsCount]; ?> / 5</span></a>
		
		<?php
		
					}
				}
				
				echo "</div>";
			}
			
		?>
		
		<div class="well well-sm partner-link">
			<a href="http://planetdestiny.com/" target="_blank"><img src="/assets/img/planetdestiny.png"></a>
		</div>
		<div class="panel panel-info">
			<div class="panel-heading">Information</div>
			<div class="panel-body">
				The Golden Chests is not tracked by Grimoire, and it is therefore impossible to track exactly which chests is obtained and which is not.
			</div>
		</div>
	</div>
	<div class="col-md-9">
	
		<?php
		
			foreach($goldenChests as $chestLocation => $chestInfo) {
				if(strtolower($chestLocation) == $curLocation) {
					foreach($chestInfo as $chestID => $chestCard) {
						
		?>
		
						<div class="panel panel-primary">
							<div class="panel-heading panel-heading-clickable">
								<h4 class="panel-title">
									<a class="accordion-toggle collapse-trigger panel-heading-link collapsed" data-toggle="collapse" data-parent="#accordion" href="#<?php echo $chestID; ?>">
										<?php echo $chestID . ". " . $chestCard[Location]; ?>
										<i class="pull-right glyphicon glyphicon-chevron-down show-when-open"></i>
										<i class="pull-right glyphicon glyphicon-chevron-left show-when-collapsed"></i>
									</a>
								</h4>
							</div>
							<div id="<?php echo $chestID; ?>" class="panel-collapse collapse">
								<div class="panel-body panel-body-top">
									<?php if($chestCard[Video] != "0") { ?>
										<a class="btn btn-danger pull-right fancybox-guide-vid" href="http://www.youtube.com/embed/<?php echo $chestCard[Video]; ?>?rel=0&autoplay=1" role="button">YouTube</a>
									<?php } ?>
									
									<?php echo "Mission Availability: " . $chestCard[Mission]; ?>
								</div>
								<div class="panel-body no-bottom-padding"><?php echo $chestCard[Description]; ?></div>
								<div class="panel-body panel-body-gallery">
									<?php for ($i = 1; $i <= $chestCard[Images]; $i++) { ?>
									
										<div class="col-md-4 col-sm-4">
											<a class="fancybox-guide-img" rel="<?php echo $chestCard[ID]; ?>" href="/guide/chests/<?php echo $chestCard[ID] . "/" . $i; ?>.jpg">
												<img style="min-width:100%; max-width:100%;" src="/guide/chests/<?php echo $chestCard[ID] . "/" . $i; ?>_thumb.jpg">
											</a>
										</div>
										
									<?php } ?>
								</div>
							</div>
						</div>
						
	<?php
	
					}
				}
			}
			
	?>
	
	</div>
</div>